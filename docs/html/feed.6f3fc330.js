function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequireaf2d;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},t.parcelRequireaf2d=r),r.register("27Lyk",(function(t,n){var o,r;e(t.exports,"register",(()=>o),(e=>o=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var s={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)s[t[n]]=e[t[n]]},r=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("27Lyk").register(JSON.parse('{"7YPdq":"feed.6f3fc330.js","i7t2a":"punk.0d9f5c3d.png","ha4U9":"sweater.a0afff79.png","i0Lnm":"jester.289108ad.png","7BcKz":"conductor.04e65b24.png"}'));const s="https://megameetings-4101b-default-rtdb.europe-west1.firebasedatabase.app/";async function a(){const e=s+"users.json",t=await fetch(e);return await t.json()}async function i(e){const{username:t,password:n}=e;let o;return(await a()).forEach(((e,r)=>{e.username==t&&e.password==n&&(o=r)})),o}async function c(e){const t=`${s}users/${e}.json`,n=await fetch(t,{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}});await n.json()}async function d(e,t){console.log(`funkar, nu inne på användare med index ${t} i database`),console.log(`detta vill jag lägga till: ${e}`);const n={method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}},o=`${s}users/${t}/posts.json`,r=await fetch(o,n);await r.json()}const l=sessionStorage.getItem("activeUser"),u=JSON.parse(l);document.getElementById("activeuser-h").innerText=u.username;const m=document.createElement("img");var p;p=new URL("../"+r("27Lyk").resolve("i7t2a"),import.meta.url).toString();const f=new URL(p);m.src=f.href;const g=document.createElement("img");var w;w=new URL("../"+r("27Lyk").resolve("ha4U9"),import.meta.url).toString();const y=new URL(w);g.src=y.href;const v=document.createElement("img");var h;h=new URL("../"+r("27Lyk").resolve("i0Lnm"),import.meta.url).toString();const E=new URL(h);v.src=E.href;const b=document.createElement("img");var L;L=new URL("../"+r("27Lyk").resolve("7BcKz"),import.meta.url).toString();const S=new URL(L);async function j(e){const t=document.getElementById("user-info");t.innerHTML="";const n=document.getElementById("posts-output-container");n.innerHTML="","punk"==e.img?t.append(m):"sweater"==e.img?t.append(g):"jester"==e.img?t.append(v):"conductor"==e.img&&t.append(b);const o=document.createElement("h2");o.innerText=e.username,t.appendChild(o);const r=document.getElementById("post-btn");r.style.visibility="hidden",e.username==u.username&&(r.style.visibility="visible");const{posts:s}=e;if(void 0!==s){Object.values(s).forEach((e=>{const t=document.createElement("h3");t.innerText=e,n.append(t)}))}}b.src=S.href,a().then((function(e){e.forEach((e=>{const t=document.createElement("li");t.innerText=e.username,document.getElementById("users-ul").append(t),t.addEventListener("click",(()=>{j(e)})),e.username==u.username&&j(e)}))}));document.getElementById("signout-btn").addEventListener("click",(()=>{sessionStorage.clear(),window.location.assign("../index.html")}));document.getElementById("deleteaccount-btn").addEventListener("click",(async e=>{e.preventDefault(),i(u).then(c),setTimeout((()=>{sessionStorage.clear(),window.location.assign("../index.html")}),2e3)}));const R=document.getElementById("post-input");document.getElementById("post-form").addEventListener("submit",(async e=>{e.preventDefault();d(R.value,await i(u)),R.value="",setTimeout((()=>{window.location.reload()}),1e3)}));
//# sourceMappingURL=feed.6f3fc330.js.map
